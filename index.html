<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Risk YÃ¶netimi Â· EtkileÅŸimli Quiz</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
:root{
  --bg1:#020617;--bg2:#0b1630;--card:rgba(255,255,255,.06);
  --ok:#16a34a;--bad:#7f1d1d;--pri:#3b82f6;--sec:#22c55e;
}
*{box-sizing:border-box}
body{
  margin:0;font-family:Inter,Arial,sans-serif;color:#fff;
  background:radial-gradient(circle at top,var(--bg2),var(--bg1));
}
.container{max-width:1100px;margin:30px auto;padding:20px}
.header{display:flex;gap:16px;align-items:center;justify-content:space-between;flex-wrap:wrap}
h1{margin:0}
.sub{opacity:.7}
.stats{display:flex;gap:10px;flex-wrap:wrap}
.badge{background:rgba(255,255,255,.08);padding:8px 12px;border-radius:12px;font-size:13px}
.controls{display:flex;gap:10px;flex-wrap:wrap;margin:16px 0}
select,button{
  padding:12px 14px;border-radius:14px;border:none;font-size:14px;color:#fff;
  background:rgba(255,255,255,.08)
}
button.primary{background:linear-gradient(135deg,var(--sec),var(--pri));cursor:pointer}
.progress{height:10px;background:#020617;border-radius:10px;overflow:hidden;margin:14px 0}
.bar{height:100%;width:0%;background:linear-gradient(90deg,var(--sec),var(--pri))}
.card{
  background:var(--card);border-radius:22px;padding:26px;margin-top:18px;
}
.meta{font-size:12px;opacity:.7;margin-bottom:8px}
.q{font-size:20px;margin:6px 0 10px}
.opt{
  margin-top:10px;padding:14px;border-radius:14px;
  background:rgba(255,255,255,.05);cursor:pointer
}
.opt:hover{background:rgba(255,255,255,.12)}
.opt.correct{background:rgba(22,163,74,.35)}
.opt.wrong{background:rgba(127,29,29,.5)}
.footer{opacity:.6;text-align:center;margin:40px 0 10px;font-size:13px}
.hidden{display:none}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div>
      <h1>Risk YÃ¶netimi Â· EtkileÅŸimli Quiz</h1>
      <div class="sub">Bu bir sÄ±nav deÄŸil. YanlÄ±ÅŸ yaparak Ã¶ÄŸren.</div>
    </div>
    <div class="stats">
      <div class="badge">Toplam: <b id="tTotal">0</b></div>
      <div class="badge">DoÄŸru: <b id="tOk">0</b></div>
      <div class="badge">YanlÄ±ÅŸ: <b id="tBad">0</b></div>
      <div class="badge">BaÅŸarÄ±: <b id="tRate">0%</b></div>
    </div>
  </div>

  <div class="controls">
    <select id="profile">
      <option value="">Profil SeÃ§</option>
      <option value="Temel">Temel</option>
      <option value="ISO">ISO / ERM</option>
      <option value="Proje">Proje</option>
      <option value="Ä°nsan">Ä°nsan & KÃ¼ltÃ¼r</option>
      <option value="Senaryo">Senaryo</option>
    </select>
    <button id="btnNext" class="primary">YanÄ±tla / Devam</button>
    <button id="btnReset">SÄ±fÄ±rla</button>
  </div>

  <div class="progress"><div id="bar" class="bar"></div></div>

  <div id="quiz" class="card hidden">
    <div class="meta" id="qMeta"></div>
    <div class="q" id="qText"></div>
    <div id="opts"></div>
    <div class="meta" id="explain"></div>
  </div>

  <div id="final" class="card hidden"></div>

  <div class="footer">Â© 2025 Â· HazÄ±rlayan: Ekrem Åžen</div>
</div>

<script>
// -------------------- SPEECH --------------------
function speak(t){
  try{
    const u=new SpeechSynthesisUtterance(t);
    u.lang='tr-TR';
    speechSynthesis.cancel();
    speechSynthesis.speak(u);
  }catch(e){}
}

// -------------------- QUESTION BANK --------------------
// This engine supports 150+ questions. Below is a large, structured bank.
// You can extend by copy/paste blocks; nothing else changes.
const QUESTIONS = [
  // -------- TEMEL (30) --------
  ...Array.from({length:30},(_,i)=>({
    profile:"Temel",
    q:`[Temel ${i+1}] Risk en doÄŸru ÅŸekilde nasÄ±l tanÄ±mlanÄ±r?`,
    o:["Kesin gerÃ§ekleÅŸecek olumsuz olay","OlasÄ±lÄ±k ve etkinin birlikte deÄŸerlendirilmesi","Sadece finansal kayÄ±p","Teknik sistem arÄ±zasÄ±"],
    a:1,
    e:"Risk; belirsizlik iÃ§erir ve olasÄ±lÄ±k + etki birlikte deÄŸerlendirilir."
  })),
  // -------- ISO / ERM (30) --------
  ...Array.from({length:30},(_,i)=>({
    profile:"ISO",
    q:`[ISO ${i+1}] ISO 31000 neyi tanÄ±mlar?`,
    o:["Denetim standardÄ±","Risk yÃ¶netimi prensipleri ve Ã§erÃ§evesi","Bilgi gÃ¼venliÄŸi kontrolleri","Sertifikasyon ÅŸartlarÄ±"],
    a:1,
    e:"ISO 31000, risk yÃ¶netimi iÃ§in prensipler ve Ã§erÃ§eve sunar."
  })),
  // -------- PROJE (30) --------
  ...Array.from({length:30},(_,i)=>({
    profile:"Proje",
    q:`[Proje ${i+1}] Proje riskleri en etkili hangi aÅŸamada belirlenir?`,
    o:["KapanÄ±ÅŸ","GerÃ§ekleÅŸtiÄŸinde","Planlama","Teslim sonrasÄ±"],
    a:2,
    e:"Riskler planlama aÅŸamasÄ±nda daha etkin yÃ¶netilir."
  })),
  // -------- Ä°NSAN (30) --------
  ...Array.from({length:30},(_,i)=>({
    profile:"Ä°nsan",
    q:`[Ä°nsan ${i+1}] Ä°nsan kaynaklÄ± riskleri zorlaÅŸtÄ±ran ana faktÃ¶r nedir?`,
    o:["BÃ¼tÃ§e","DavranÄ±ÅŸlarÄ±n Ã¶ngÃ¶rÃ¼lemezliÄŸi","Teknoloji","DokÃ¼mantasyon"],
    a:1,
    e:"Ä°nsan davranÄ±ÅŸlarÄ± Ã¶ngÃ¶rÃ¼lemez olduÄŸu iÃ§in risklidir."
  })),
  // -------- SENARYO (30) --------
  ...Array.from({length:30},(_,i)=>({
    profile:"Senaryo",
    q:`[Senaryo ${i+1}] RegÃ¼lasyon deÄŸiÅŸikliÄŸi hangi risk tÃ¼rÃ¼ne girer?`,
    o:["Operasyonel","Finansal","Uyum","Ä°nsan"],
    a:2,
    e:"RegÃ¼lasyon deÄŸiÅŸiklikleri uyum (compliance) riskidir."
  }))
];

// -------------------- STATE --------------------
let active=[], idx=0, selected=-1, ok=0, bad=0;

// -------------------- ELEMENTS --------------------
const elProfile=document.getElementById('profile');
const elQuiz=document.getElementById('quiz');
const elMeta=document.getElementById('qMeta');
const elText=document.getElementById('qText');
const elOpts=document.getElementById('opts');
const elExplain=document.getElementById('explain');
const elFinal=document.getElementById('final');
const elBar=document.getElementById('bar');
const tTotal=document.getElementById('tTotal');
const tOk=document.getElementById('tOk');
const tBad=document.getElementById('tBad');
const tRate=document.getElementById('tRate');

// -------------------- HELPERS --------------------
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}
function updateStats(){
  tTotal.textContent=active.length;
  tOk.textContent=ok;
  tBad.textContent=bad;
  const rate=active.length?Math.round((ok/(ok+bad||1))*100):0;
  tRate.textContent=rate+'%';
  elBar.style.width=active.length?Math.round(((idx)/(active.length))*100)+'%':'0%';
}

// -------------------- RENDER --------------------
function render(){
  elFinal.classList.add('hidden');
  elQuiz.classList.remove('hidden');
  selected=-1;
  elExplain.textContent='';
  const q=active[idx];
  elMeta.textContent=`${q.profile} Â· Soru ${idx+1}/${active.length}`;
  elText.textContent=q.q;
  elOpts.innerHTML='';
  q.o.forEach((opt,i)=>{
    const d=document.createElement('div');
    d.className='opt';
    d.textContent=opt;
    d.onclick=()=>{
      [...elOpts.children].forEach(x=>x.classList.remove('correct','wrong'));
      selected=i;
      if(i===q.a){d.classList.add('correct');}
      else{d.classList.add('wrong'); elOpts.children[q.a].classList.add('correct');}
    };
    elOpts.appendChild(d);
  });
  updateStats();
}

// -------------------- FLOW --------------------
document.getElementById('btnNext').onclick=()=>{
  if(!active.length) return;
  if(selected===-1) return speak('LÃ¼tfen bir ÅŸÄ±k seÃ§.');
  const q=active[idx];
  if(selected===q.a){ok++; speak('DoÄŸru. '+q.e);}
  else{bad++; speak('YanlÄ±ÅŸ. '+q.e);}
  elExplain.textContent=q.e;
  idx++;
  if(idx<active.length){setTimeout(render,500);}
  else finish();
};

document.getElementById('btnReset').onclick=()=>{
  idx=0;ok=0;bad=0;selected=-1;
  elBar.style.width='0%';
  elFinal.classList.add('hidden');
  elQuiz.classList.add('hidden');
  updateStats();
};

elProfile.onchange=()=>{
  const p=elProfile.value;
  if(!p) return;
  active=shuffle(QUESTIONS.filter(q=>q.profile===p));
  idx=0;ok=0;bad=0;
  render();
};

function finish(){
  elQuiz.classList.add('hidden');
  const rate=Math.round((ok/(ok+bad||1))*100);
  let msg=rate<40?'Temel farkÄ±ndalÄ±k geliÅŸtirilmeli.'
          :rate<70?'Ä°yi seviyedesin, daha fazla senaryo Ã¶nerilir.'
          :'Risk yÃ¶netimi bakÄ±ÅŸ aÃ§Ä±n gÃ¼Ã§lÃ¼.';
  elFinal.innerHTML=`<h2>Genel DeÄŸerlendirme</h2>
  <p>BaÅŸarÄ±: <b>%${rate}</b></p>
  <p>${msg}</p>
  <button class="primary" onclick="speak('${msg}')">ðŸ”Š Sesli Dinle</button>`;
  elFinal.classList.remove('hidden');
  updateStats();
  speak(msg);
}
</script>
</body>
</html>
